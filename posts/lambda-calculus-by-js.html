<!DOCTYPE html><head><div id="google-analystics-content-experiment"><!-- Google Analytics Content Experiment code -->
<script>function utmx_section(){}function utmx(){}(function(){var
k='76320442-0',d=document,l=d.location,c=d.cookie;
if(l.search.indexOf('utm_expid='+k)>0)return;
function f(n){if(c){var i=c.indexOf(n+'=');if(i>-1){var j=c.
indexOf(';',i);return escape(c.substring(i+n.length+1,j<0?c.
length:j))}}}var x=f('__utmx'),xx=f('__utmxx'),h=l.hash;d.write(
'<sc'+'ript src="'+'http'+(l.protocol=='https:'?'s://ssl':
'://www')+'.google-analytics.com/ga_exp.js?'+'utmxkey='+k+
'&utmx='+(x?x:'')+'&utmxx='+(xx?xx:'')+'&utmxtime='+new Date().
valueOf()+(h?'&utmxhash='+escape(h.substr(1)):'')+
'" type="text/javascript" charset="utf-8"><\/sc'+'ript>')})();
</script><script>utmx('url','A/B');</script>
<!-- End of Google Analytics Content Experiment code -->

</div><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=100.0, user-scalable=1"><meta charset="UTF-8"><meta name="msvalidate.01" content="9336BD1F980CE1BA4AA8F4769F742C82"><meta property="fb:app_id" content="1443378939224616"><title>CoffeeScriptで理解する『ラムダ計算入門』 - slow living in the sky</title><link rel="stylesheet" href="../css/base-min.css" type="text/css"/><link rel="stylesheet" href="../css/grids-min.css" type="text/css"/><link rel="stylesheet" href="../css/tables-min.css" type="text/css"/><link rel="stylesheet" href="../css/buttons-min.css" type="text/css"/><link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Oswald" type="text/css"/><link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Source+Code+Pro" type="text/css"/><link rel="stylesheet" href="../css/font-awesome.min.css" type="text/css"/><link rel="stylesheet" href="../css/main.css" type="text/css"/><link rel="stylesheet" href="../css/mobile.css" type="text/css"/><link rel="stylesheet" href="../css/highlight/xcode.css" type="text/css"/><script src="../js/zepto.min.js" type="text/javascript"></script><script src="../js/pre-tab.min.js" type="text/javascript"></script><script src="../js/lazyload.min.js" type="text/javascript"></script><script src="../js/highlight.pack.js" type="text/javascript"></script><script src="http://f1.nakanohito.jp/lit/index.js" type="text/javascript" charset="utf-8"></script><script type="text/javascript">try { var lb = new Vesicomyid.Bivalves("126200"); lb.init(); } catch(err) {} </script>
</script><script>// fix spaces
Zepto(function($){
 Pretab.fix();
});

// load highlightjs
hljs.initHighlightingOnLoad();
</script><script>window.device = {
 type: '',
 desktop: false,
 tablet: false,
 mobile: false
};

Zepto(function($){
 var desktop = $('#media_query_desktop').css('display');
 var tablet = $('#media_query_tablet').css('display');
 var mobile = $('#media_query_mobile').css('display');
 
 if(tablet == 'none'){
  window.device.type = 'tablet';
  window.device.tablet = true;
 }else if(mobile == 'none'){
  window.device.type = 'mobile';
  window.device.mobile = true;
 }else{
  window.device.type = 'desktop';
  window.device.desktop = true;
 }
});
</script><script>Zepto(function($){
 $('img.lazy').each(function(i,e){
  $(this).attr('alt','loading...');
  lzld(this);
 });
 
 $('#post').find('a:not(.category-href):not(.pure-button)').attr('target','_blank');
 $('table:not(.pure-table)').addClass('pure-table pure-table-striped')
});
</script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-47211876-1']);
_gaq.push(['_trackPageview']);

(function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script></head><body><div id="fb-root"></div><script>(function(d, s, id) {
 var js, fjs = d.getElementsByTagName(s)[0];
 if (d.getElementById(id)) return;
 js = d.createElement(s); js.id = id;
 js.src = "//connect.facebook.net/ja_JP/all.js#xfbml=1";
 fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script><div id="media_query_desktop" class="pure-hidden-desktop"></div><div id="media_query_tablet" class="pure-hidden-tablet"></div><div id="media_query_mobile" class="pure-hidden-phone"></div><div id="background_before"><div id="outer_frame"><div id="header" class="pure-u-5-5"><div id="logo"><h1 id="logo_text"><a id="logo_text_inner" href="http://atmarksharp.github.io">SLOW LIVING IN THE SKY</a></h1></div></div><script>Zepto(function($){
 var flag = false;
 var $mobile_menu_button = $('#mobile_menu_button');
 var $mobile_menu_content = $('#mobile_menu_content');
 var $mobile_menu_button_inner = $('#mobile_menu_button_inner');
 var $menu_icon = $('#menu-icon');
 
 $mobile_menu_content.hide();
 
 $mobile_menu_button.click(function(e){
  flag = !flag
  if(flag){
   $mobile_menu_content.show();
   $mobile_menu_button.css('background-color','#6A7DA6');
   $menu_icon.removeClass('fa-angle-down');
   $menu_icon.addClass('fa-angle-up');
  }else{
   $mobile_menu_content.hide();
   $mobile_menu_button.css('background-color','#4e7ed8');
   $menu_icon.removeClass('fa-angle-up');
   $menu_icon.addClass('fa-angle-down');
  }
 });
 
 $mobile_menu_button.mouseenter(function(e){
  //- $(this).css('background-color','#A8BEE6');
  
 });
 
 $mobile_menu_button.mouseleave(function(e){
  //- $(this).css('background-color','#90afe7');
 });
 
 
});
</script><div id="mobile_menu"><div id="mobile_menu_inner"><div id="mobile_menu_button" class="pure-button"><i class="menu-icon fa fa-bars"></i><i id="menu-icon" class="menu-icon fa fa-angle-down"></i></div><a href="../feed.xml" class="rss_button"><i class="menu-icon fa fa-rss"></i></a><a href="../sitemap.xml" class="rss_button"><i class="menu-icon fa fa-sitemap"></i></a><a href="#footer-recent-posts" class="rss_button"><i class="menu-icon fa fa-list-ul"></i></a><a href="https://twitter.com/atmarksharp" class="rss_button"><i class="menu-icon fa fa-twitter"></i></a><a href="https://www.facebook.com/slow.living.in.the.sky" class="rss_button"><i class="menu-icon fa fa-facebook"></i></a></div></div><div id="mobile_menu_content" class="pure-hidden-desktop"><div id="mobile_menu_content_border"><div id="mobile_menu_content_inner"><div id="search_bar"><form id="search_bar_inner" action="http://www.google.com/search" method="get" target="_blank"><input type="hidden" name="q" value="site:atmarksharp.github.io"/><input type="text" name="q" style="color:gray" value="Search..." onfocus="(this.value == &quot;Search...&quot;)? this.value=&quot;&quot; : true" onblur="(this.value)? true : this.value=&quot;Search...&quot;" class="search-bar-text"/><input type="submit" class="search-bar-submit"/></form></div><h3 class="widget-title"><span class="widget-title-text">RECENT POSTS</span></h3><div class="widget-content"><ul class="widget-post-list"><li class="widget-post-item"><a href="./functional-language-by-js.html">CoffeeScriptで理解する『関数型言語』</a></li><li class="widget-post-item"><a href="./lambda-calculus-by-js.html">CoffeeScriptで理解する『ラムダ計算入門』</a></li><li class="widget-post-item"><a href="./long-command-play-sound.html">コマンドの終了時に好きな音を鳴らす方法</a></li><li class="widget-post-item"><a href="./cpu-comparison.html">年代別に見るCPUの進化 ― あなたのCPUのスコア知ってますか？</a></li><li class="widget-post-item"><a href="./greatest-keyboards.html">最も優れたキーボードランキング</a></li></ul></div><h3 class="widget-title"><span class="widget-title-text">PROFILE</span></h3><div class="widget-content"><ul class="widget-post-list"><li class="widget-post-item"><div class="github"><i class="menu-icon fa fa-github"></i><a href="https://github.com/atmarksharp" target="_blank">atmarksharp</a></div></li><li class="widget-post-item"><div class="twitter"><i class="menu-icon fa fa-twitter"></i><a href="https://twitter.com/atmarksharp" target="_blank">atmarksharp</a></div></li><li class="widget-post-item"><div class="twitter"><i class="menu-icon fa fa-facebook"></i><a href="https://www.facebook.com/slow.living.in.the.sky" target="_blank">slow.living.in.the.sky</a></div></li></ul></div><h3 class="widget-title"><span class="widget-title-text">ABOUT</span></h3><div class="widget-content">IT系の内容を中心に、気になる情報を紹介します。
</div><h3 class="widget-title"><span class="widget-title-text">RSS</span></h3><div class="widget-content"><ul class="widget-post-list"><li class="widget-post-item"><div class="rss"><img src="../img/rss.gif" alt="rss.gif"/><a href="/feed.xml">RSS 2.0</a></div></li></ul></div></div></div></div><div id="center_wrapper" class="pure-g"><div id="content"><div id="content_inner"><div id="post_date">2014-01-28</div><h2 id="post_title">CoffeeScriptで理解する『ラムダ計算入門』</h2><div id="categories"> <span id="categories-label">categories:</span><span class="category"><a href="../category.html?q=%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" class="category-href">プログラミング</a></span><span class="category"><a href="../category.html?q=%E9%96%A2%E6%95%B0%E5%9E%8B%E8%A8%80%E8%AA%9E" class="category-href">関数型言語</a></span><span class="category"><a href="../category.html?q=JavaScript" class="category-href">JavaScript</a></span><span class="category"><a href="../category.html?q=CoffeeScript" class="category-href">CoffeeScript</a></span></div><div id="post_photo"><img src="../img/lambda.jpg" alt="lambda.jpg"/></div><hr/><div id="adsense_wrapper" style="margin-top: 10px; margin-bottom: 10px;" class="center"><p style="color:#aaa; letter-spacing: 0; margin: 0; margin-bottom: 5px;">[ PR ]</p><div id="adsense"><script async="async" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins style="display:block" data-ad-client="ca-pub-9672338973208782" data-ad-slot="8155892569" data-ad-format="auto" class="adsbygoogle"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div><hr style="margin-bottom: 40px;"/><div id="post"><h2>関数型言語の基板になっているラムダ計算</h2>
<p>Twitter社が関数型言語<strong>Scala</strong>を導入したことで関数型言語が一躍注目されましたが、ブームと同時にラムダ計算について勉強する方が増えました。</p>
<p>個人的には、ラムダ計算はあくまでラムダ計算であって、現在の関数型言語とはちょっと離れてしまっているという印象です。</p>
<p>しかし、関数型言語の持つ性質とラムダ計算がルーツを同じくしているのは事実なので、少し触れておく価値はあると思います。</p>
<h2>ラムダ計算とは</h2>
<p align=center><img src="../img/lambda-recursive.jpg" alt="lambda-recursive.jpg"></p>

<p>まずラムダ計算とは何かというと、<strong>関数への引数の評価</strong>と<strong>関数適用</strong>だけで計算をしようというものです。</p>
<p>「え、それだけで一体何が計算できるの？」、と思うかもしれませんが、自然数、算術、タプル、リスト、パターンマッチ、再帰などが定義でき、プログラミングの数学的モデルとしての役割を担っています。</p>
<p>今はまだ信じられないかも知れませんが、読み進めていくとその理由がわかります。</p>
<h2>基本と書き方</h2>
<p>ラムダ計算の基本は、<strong>関数</strong>です。</p>
<p>これは、JavaScriptでいう下のようなものです。</p>
<pre><code>function (a){ return b; }</code></pre>
<p>この書き方を、</p>
<blockquote>
<p align=center><img src="../img/lambda-a-b.gif" alt="lambda-a-b.gif"></p>

</blockquote>
<p>に書き直すと、<strong>ラムダ記法</strong>（ラムダ計算で使用する記法）になります。（λ＝ラムダ）</p>
<p>つまり、</p>
<blockquote>
<p align=center><img src="../img/lambda-instruction.gif" alt="lambda-instruction.gif"></p>

</blockquote>
<p>と書き直せばラムダ記法になるということです。簡単ですね。</p>
<h2>関数適用</h2>
<p>JavaScriptで関数を使う（適用する）場合は、</p>
<pre><code>function f(a){ return b; }

f(c);</code></pre>
<p>という感じになりますよね。これを１行で書くとすると、以下のようになります。</p>
<pre><code>(function (a){ return b; })(c);</code></pre>
<p>これを以下のように書き直せばラムダ記法になります。</p>
<blockquote>
<p align=center><img src="../img/lambda-apply.gif" alt="lambda-apply.gif"></p>

</blockquote>
<p>つまり、<strong>aを引数に取りbを返す関数に、cを適用する</strong>という意味になります。</p>
<h2>ラムダ記法のBNF</h2>
<p>ラムダ記法をすべて解説すると長くなるので、以下に拡張BNFでの定義を書いておきます。</p>
<pre><code>id: &quot;^[a-z]$&quot;

expr: expr exprs
 | &quot;λ&quot; id expr
 | id
 ;</code></pre>
<p>実際には以下のような省略形も使います。</p>
<blockquote>
<p>TRUE = λt.λf.t<br>
FALSE = λt.λf.f<br>
PAIR = λa.λb.λf.fab<br>
FIRST = λf.f <strong>TRUE</strong><br>
SECOND = λf.f <strong>FALSE</strong><br>
0 = λs.λz.s<br>
1 = λs.λz.s(z)<br><br>
<strong>FIRST</strong>(<strong>PAIR</strong> <strong>0</strong> <strong>1</strong>) # 0<br>
<strong>SECOND</strong>(<strong>PAIR</strong> <strong>0</strong> <strong>1</strong>) # 1</p>
</blockquote>
<h2>CoffeeScriptを使うとラムダ式っぽく見える</h2>
<p>実は、<strong>CoffeeScript</strong>を使うとラムダ記法そっくりになります。</p>
<pre><code>((a)-&gt;b)(c)</code></pre>
<p>もちろん意味は先程の</p>
<pre><code>(function (a){ return b; })(c);</code></pre>
<p>と同じです。JavaScriptユーザの方のために、適宜説明するので安心して下さい。</p>
<h2>(メモ) これ以降をより理解するには</h2>
<p align=center><img src="../img/repl-it.jpg" alt="repl-it.jpg"></p>

<p>これ以降はかなり内容が複雑になるので、もしかするとよくわからないかもしれません。</p>
<p>なので、これ以降の話をより理解するには、<a href="http://repl.it/languages/CoffeeScript">repl.it</a>のような対話シェルを使って、<strong>ぜひ自分自身でコードを入力してみてください</strong>。</p>
<p>ただ読むよりはよく分かるんじゃないかと思います。</p>
<h2>ラムダ計算での true, false, if</h2>
<p>記法がわかったところで、早速、ラムダ計算でifがどのように実現されているかを見てみたいと思います。</p>
<p>ラムダ計算でいうifとは、CoffeeScriptでいうと、次のようなものです。</p>
<pre><code>_if(cond,a,b)

# test

_if(true,1,0) # 1
_if(false,1,0) # 0</code></pre>
<p>ニュアンスは、「もしcondがtrueならば、aを返し、condがfalseならばbを返す」という感じです。</p>
<p>ちなみに、もちろんですが以下のような実装ではありません。</p>
<pre><code>_if = (cond,a,b) -&gt; if cond then a else b

# test

_if(true,1,0) # 1
_if(false,1,0) # 0</code></pre>
<p>ラムダ計算にはもちろんifはないですし、trueやfalse自体も定義されていないので、このコードはラムダ計算では実現不可能です。</p>
<p>実際どうやって実現しているかをCoffeeScriptで再現すると、以下のようになります。</p>
<ul>
<li><strong>(a)-&gt;(b)-&gt;c</strong> はJavaScriptの <strong>function(a){ function(b){ return c; } }</strong></li>
</ul>
<pre><code>_true = (t)-&gt;(f)-&gt;t
_false = (t)-&gt;(f)-&gt;f
_if = (cond)(a)(b) -&gt; cond(a)(b)
print_bool = (bool) -&gt; bool(&#39;true&#39;)(&#39;false&#39;)

# test

_if(_true)(1)(0) # 1
_if(_false)(1)(0) # 0

print_bool(_true) # &#39;true&#39;
print_bool(_false) # &#39;false&#39;</code></pre>
<p>なんだか凄いことになっていますね。ですがちゃんと要件を満たしています。</p>
<p>しかも、上記の<strong>print_bool</strong>関数を使えば、ちゃんと<strong>_true</strong>と<strong>_false</strong>を文字列として表示できています。</p>
<h3>仕組み</h3>
<p>実は、<strong>print_bool</strong>にその秘密が隠されています。</p>
<pre><code>print_bool = (bool) -&gt; bool(&#39;true&#39;)(&#39;false&#39;)</code></pre>
<p>ちょっと見慣れない書き方ですが、</p>
<pre><code>bool(&#39;true&#39;)(&#39;false&#39;)</code></pre>
<p>というのは次のように説明できます。</p>
<pre><code># bool(&#39;true&#39;)は関数を返す。
f1 = bool(&#39;true&#39;); 

# 返ってきた関数にさらに引数を渡す。
f1(&#39;false&#39;);

# 合わせると以下になる ＝ boolは「関数を返す関数」
bool(&#39;true&#39;)(&#39;false&#39;)</code></pre>
<p>以上を踏まえると、次のことが分かります。</p>
<ul>
<li><strong>_true</strong> は「関数を返す関数」で、２回関数適用されると、１回目の引数を返す。</li>
<li><strong>_false</strong> は「関数を返す関数」で、２回関数適用されると、２回目の引数を返す。</li>
</ul>
<p>ということになります。実際にtrueの実装を分かりやすく書き直すと、</p>
<pre><code>_true = (a) -&gt; ( (b) -&gt; a )</code></pre>
<p>というようになり、実際に<strong>２回関数適用された場合に、１回目にもらった引数を</strong>返すという実装になっています。</p>
<p>つまり、<span style="color:red;"><strong>trueとfalse自体にifの機能をもたせている</strong></span>ということですね。</p>
<h3>これをラムダ計算に直す</h3>
<p>最後に、先程のプログラムをラムダ計算に直して完了です。</p>
<blockquote>
<p><p align=center><img src="../img/lambda-if-true-false.gif" alt="lambda-if-true-false.gif"></p>
（※）</p>
</blockquote>
<p>これで、ラムダ計算でtrue,false,ifを実現することができました。</p>
<p>（※ ラムダ計算の <strong>abc</strong> はCoffeeScriptでいう <strong>a(b)(c)</strong> の意味。同様に <strong>(λa.b)cd</strong> は <strong>((a) -&gt; b)(c)(d)</strong> となる。）</p>
<h2>ラムダ計算の本質</h2>
<p>前項のtrueとfalseのように、ラムダ計算では様々な概念を定義できますが、何故そんなことが出来るのでしょうか。</p>
<p>実は、CoffeeScriptでもちゃっかり使った<strong>関数を返す関数</strong>＝『<strong>高階関数</strong>』と、クロージャという概念が含まれているからです。</p>
<p>今回はこれらのことには深く触れませんが、このエッセンスを含んだ言語が関数型言語ということになります。</p>
<p>ということは、JavaScriptは関数型言語の性質をある程度備えているということになりますね。</p>
<h2>整数と加算・乗算</h2>
<p>ところで、今までの説明で数字を使っていましたが、ラムダ計算にはもちろん数字はありません。</p>
<p>整数の定義の１つは次のようになります。</p>
<blockquote>
<p align=center><img src="../img/lambda-nums.gif" alt="lambda-nums.gif"></p>

</blockquote>
<p>これは、チャーチ数の定義そのものです（<a href="http://en.wikipedia.org/wiki/Church_encoding#Church_numerals">英語版Wikipedia:Church_encoding#Church_numerals</a>）。</p>
<p>概念だけでは分かりづらいので、より実践的にすると下のコードになります。</p>
<pre><code>_0 = (f)-&gt;(x)-&gt;x
_1 = (f)-&gt;(x)-&gt;f(x)
_2 = (f)-&gt;(x)-&gt;f(f(x))
_3 = (f)-&gt;(x)-&gt;f(f(f(x)))

add1 = (a)-&gt; a+1
print_num = (n) -&gt; n(add1)(0)

print_num(_0) # 0
print_num(_1) # 1
print_num(_2) # 2
print_num(_3) # 3</code></pre>
<p>fを『1加える関数』、xを0とすると自然数になるというのがよく分かりますね。</p>
<p>実際のチャーチ数はfとxは定義しないのですが、そのことについて詳しくは他の文献を見て下さい。</p>
<h3>加算と乗算</h3>
<p>加算と乗算は次のようになります。（チャーチ数には減算もありますが、理解しづらいので省略します。）</p>
<blockquote>
<p align=center><img src="../img/lambda-calc.gif" alt="lambda-calc.gif"></p>

</blockquote>
<p>以下に理屈を説明しておきますが、特に理解する必要は特にありません（笑）</p>
<p>こういう理屈でラムダ計算で定義できるよ、くらいのニュアンスです。</p>
<hr>

<p>まず<strong>加算</strong>ですが、仮にmを<strong>3</strong>、nを<strong>1</strong>とすると、</p>
<p align=center><img src="../img/lambda-plus-instruction.jpg" alt="lambda-plus-instruction.jpg"></p>

<p>となります。つまり、fの数が足されるようなイメージだと思えばいいと思います。</p>
<p>次に<strong>乗算</strong>ですが、仮にmを<strong>5</strong>、nを<strong>3</strong>とすると、以下の説明になります。</p>
<ul>
<li>まず、np = (f)-&gt;(x)-&gt; f(f(f(x))) である</li>
<li>x = 0 のとき、次のxの値が f(f(f(x))) に変化する</li>
<li>x = 1 のとき、次のxの値が f(f(f(f(f(f(x)))))) に変化する</li>
<li>これが x = 5 まで続くので、最終的には fが15回連鎖することになり、結果15となる。</li>
</ul>
<p>一応コードも置いておきます。</p>
<pre><code>_0 = (f)-&gt;(x)-&gt;x
_1 = (f)-&gt;(x)-&gt;f(x)
_2 = (f)-&gt;(x)-&gt;f(f(x))
_3 = (f)-&gt;(x)-&gt;f(f(f(x)))

add1 = (n)-&gt; n+1
print_num = (n) -&gt; n(add1)(0)

plus = (m)-&gt;(n)-&gt;(f)-&gt;(x)-&gt; m(f)(n(f)(x))
mult = (m)-&gt;(n)-&gt;(f)-&gt; m(n(f))

print_num( plus(_1)(_2) ) # 3
print_num( mult(_3)(_3) ) # 9</code></pre>
<p>なんとなくラムダ計算が分かってきたのではないでしょうか。</p>
<h2>組の定義とその操作</h2>
<p align=center><img src="../img/introfs_01_04.gif" alt="introfs_01_04.gif"></p>

<p>最後に、組（ペア、タプル）の定義と、組に関する操作を紹介します。</p>
<p>定義は以下のようになります。</p>
<blockquote>
<p align=center><img src="../img/lambda-pair.jpg" alt="lambda-pair.jpg"></p>

</blockquote>
<p>CoffeeScriptで実際に使ってみると以下のようになります。</p>
<pre><code>_true = (t)-&gt;(f)-&gt;t
_false = (t)-&gt;(f)-&gt;f

_0 = (f)-&gt;(x)-&gt;x
_1 = (f)-&gt;(x)-&gt;f(x)
print_num = (n) -&gt; n((a)-&gt;a+1)(0)

tuple = (a)-&gt;(b)-&gt;(f)-&gt;f(a)(b)
first = (t)-&gt;t(_true)
second = (t)-&gt;t(_false)

tp = tuple(_0)(_1)

a = first(tp)
b = second(tp)

print_num(a) # 0
print_num(b) # 1</code></pre>
<p>今までの集大成という感じですね。</p>
<p>tupleの定義がifとそっくりであることや、firstとsecondの定義の中にtrueとfalseの定義が含まれているのに気づいたでしょうか？</p>
<p>２つの要素の１つ目を取るのがtrue、２つ目を取るのがfalseでしたので、firstとsecondがこのような定義になるのは明らかです。</p>
<p>つまりtupleの定義の中に、<strong>要素の操作をするための機能の一部が既に含まれている</strong>ことになります。</p>
<p>tupleの定義が関数であるのに、２つの値がきちんと維持される理由は、tupleの定義が<strong>クロージャ</strong>＝セマンティックスコープを成しているためです。クロージャについては別途調べてもらうと良いと思います。</p>
<h2>型なしラムダ計算と型付きラムダ計算</h2>
<p>実は、今まで紹介したものは、<strong>型なしラムダ計算</strong>と呼ばれているものです。</p>
<p>型なしラムダ計算に<strong>型</strong>の概念を加えたのが<strong>型付きラムダ計算</strong>です。</p>
<p>型付きラムダ計算はOCaml（ML）やHaskellの基板となっており、数学的モデルとしても他の数学的モデルと密接に関係しているようです。 </p>
<p>より詳しく知りたい方は、<a href="http://ja.wikipedia.org/wiki/%E5%9E%8B%E4%BB%98%E3%81%8D%E3%83%A9%E3%83%A0%E3%83%80%E8%A8%88%E7%AE%97">Wikipedia:型付きラムダ計算</a>や<a href="http://www.kb.ecei.tohoku.ac.jp/~sumii/class/keisanki-software-kougaku-2005/lambda.pdf">ラムダ計算入門 - 住井英二郎 （PDF）</a>などを参考にして下さい。</p>
<h2>コンビネータ</h2>
<p align=center><img src="../img/y-combinator.jpg" alt="y-combinator.jpg"></p>

<p>最後に、少しだけ<strong>コンビネータ</strong>について触れておこうと思います。</p>
<p><strong>コンビネータ</strong>とは、ラムダ計算を単純化したモデルとして知られています。</p>
<p>コンビネータとは次のものです。</p>
<p align=center><img src="../img/ski-combinators.png" alt="ski-combinators.png"></p>

<p>これらは基本的なコンビネータで、<strong>SKIコンビネータ</strong>と呼ばれています。</p>
<p>詳しくは触れませんが、コンビネータの簡約の方がラムダ計算の簡約より簡単なので、コンビネータの方が計算に向いていると言われています。</p>
<p>関数型言語の実行モデルに採用されている例もあるようです。</p>
<p>詳しくは<a href="http://ja.wikipedia.org/wiki/SKI%E3%82%B3%E3%83%B3%E3%83%93%E3%83%8D%E3%83%BC%E3%82%BF%E8%A8%88%E7%AE%97">Wikipedia:SKIコンビネータ計算</a>を参照してください。</p>
<h2>まとめ</h2>
<p>ちょっと早足になりましたが、ラムダ計算の入門になれば幸いだと思います。</p>
<p>間違いや指摘などありましたらコメント欄に書き込むか、Twitterなどで指摘してください。</p>
<div class="amazon"><div class="amazlet-box" style="margin-bottom:0px;"><div class="amazlet-image" style="float:left;margin:0px 12px 1px 0px;"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4781911358/mvnhatenadiar-22/ref=nosim/" name="amazletlink" target="_blank"><img src="http://ecx.images-amazon.com/images/I/51CQ6W83J6L._SL160_.jpg" alt="計算モデル論入門―チューリング機械からラムダ計算へ (Information Science & Engineering (F5))" style="border: none;" /></a></div><div class="amazlet-info" style="line-height:120%; margin-bottom: 10px"><div class="amazlet-name" style="margin-bottom:10px;line-height:120%"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4781911358/mvnhatenadiar-22/ref=nosim/" name="amazletlink" target="_blank">計算モデル論入門―チューリング機械からラムダ計算へ (Information Science & Engineering (F5))</a><div class="amazlet-powered-date" style="font-size:80%;margin-top:5px;line-height:120%">posted with <a href="http://www.amazlet.com/" title="amazlet" target="_blank">amazlet</a> at 14.01.30</div></div><div class="amazlet-detail">井田 哲雄 浜名 誠 <br />サイエンス社 <br />売り上げランキング: 272,830<br /></div><div class="amazlet-sub-info" style="float: left;"><div class="amazlet-link" style="margin-top: 5px"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4781911358/mvnhatenadiar-22/ref=nosim/" name="amazletlink" target="_blank">Amazon.co.jpで詳細を見る</a></div></div></div><div class="amazlet-footer" style="clear: left"></div></div>
</div></div><script type="text/javascript">// apply lazy loading
Zepto(function($){
 $('script.lazy').each(function(i,e){
  var $this = $(this);
  var $code = $($this.text());
  var $parent = $this.parent();
  $parent.append($code);
 });
});
</script><div id="social_buttons" class="center"><script type="text/plain" class="lazy"><span class=".social_button">
 <div class="fb-like"
  data-href="http://atmarksharp.github.io/posts/lambda-calculus-by-js.html"
  data-layout="button_count"
  data-action="like"
  data-show-faces="false"
  data-share="false">
 </div>
</span>
</script><span class="social_button"><a href="http://b.hatena.ne.jp/entry/http://atmarksharp.github.io/posts/lambda-calculus-by-js.html" data-hatena-bookmark-title="CoffeeScriptで理解する『ラムダ計算入門』" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加" class="hatena-bookmark-button"><img src="http://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;"/></a><script type="text/javascript" src="http://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script></span><script type="text/plain" class="lazy"><span class="social_button">
 <a class="twitter-share-button"
  href="https://twitter.com/share"
  data-via="atmarksharp">ツイート</a>
 <script>
  !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
 </script>
</span>
</script></div><div class="center"><p style="margin: 0; margin-top: 20px; margin-bottom: 5px;" class="center"><script type="text/plain" class="lazy"><div class="follow-me center" style="margin-bottom:0px; margin-top:0px">
 <a href="https://twitter.com/atmarksharp" class="twitter-follow-button" data-show-count="false" data-lang="ja" data-size="large">@atmarksharpさんをフォロー</a>
 <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
</div>
</script></p><p style="margin: 0;" class="center"><a href="https://www.facebook.com/slow.living.in.the.sky"><img src="../img/facebook-page-like.jpg"/></a></p></div><h3 id="footer-recent-posts" style="margin-top: 30px; width:100%; max-width: 100% !important;" class="widget-title"><span class="widget-title-text">RECENT POSTS</span></h3><div style="margin-bottom: 20px; font-size: 11pt;" class="widget-content"><table style="margin:0 auto; width:100%; max-width: 100% !important;" class="widget-post-list"><tbody><tr style="margin-bottom:20px;" class="widget-post-item"><td style="text-align:center; padding-bottom: 10px; padding-top:10px;"><a href="./functional-language-by-js.html"><img src="../img/functional-signboard4.jpg" style="max-height:70px; max-width:100px; margin-right:10px; vertical-align:middle; border-radius: 10px;"/></a></td><td style="padding-bottom: 10px; padding-top:10px;"><a href="./functional-language-by-js.html">CoffeeScriptで理解する『関数型言語』</a></td></tr><tr style="margin-bottom:20px;" class="widget-post-item"><td style="text-align:center; padding-bottom: 10px; padding-top:10px;"><a href="./lambda-calculus-by-js.html"><img src="../img/lambda.jpg" style="max-height:70px; max-width:100px; margin-right:10px; vertical-align:middle; border-radius: 10px;"/></a></td><td style="padding-bottom: 10px; padding-top:10px;"><a href="./lambda-calculus-by-js.html">CoffeeScriptで理解する『ラムダ計算入門』</a></td></tr><tr style="margin-bottom:20px;" class="widget-post-item"><td style="text-align:center; padding-bottom: 10px; padding-top:10px;"><a href="./long-command-play-sound.html"><img src="../img/sound-command2.jpg" style="max-height:70px; max-width:100px; margin-right:10px; vertical-align:middle; border-radius: 10px;"/></a></td><td style="padding-bottom: 10px; padding-top:10px;"><a href="./long-command-play-sound.html">コマンドの終了時に好きな音を鳴らす方法</a></td></tr><tr style="margin-bottom:20px;" class="widget-post-item"><td style="text-align:center; padding-bottom: 10px; padding-top:10px;"><a href="./cpu-comparison.html"><img src="../img/super-cpu2.jpg" style="max-height:70px; max-width:100px; margin-right:10px; vertical-align:middle; border-radius: 10px;"/></a></td><td style="padding-bottom: 10px; padding-top:10px;"><a href="./cpu-comparison.html">年代別に見るCPUの進化 ― あなたのCPUのスコア知ってますか？</a></td></tr><tr style="margin-bottom:20px;" class="widget-post-item"><td style="text-align:center; padding-bottom: 10px; padding-top:10px;"><a href="./greatest-keyboards.html"><img src="../img/keyboards.jpg" style="max-height:70px; max-width:100px; margin-right:10px; vertical-align:middle; border-radius: 10px;"/></a></td><td style="padding-bottom: 10px; padding-top:10px;"><a href="./greatest-keyboards.html">最も優れたキーボードランキング</a></td></tr></tbody></table></div><hr/><div id="adsense_wrapper" style="margin-top: 10px; margin-bottom: 10px;" class="center"><p style="color:#aaa; letter-spacing: 0; margin: 0; margin-bottom: 5px;">[ PR ]</p><div id="adsense"><script async="async" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins style="display:block" data-ad-client="ca-pub-9672338973208782" data-ad-slot="5920449760" data-ad-format="auto" class="adsbygoogle"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div><hr style="margin-bottom: 40px;"/><div id="disqus_thread"><script type="text/plain" class="lazy"><script type="text/javascript">
 var disqus_shortname = 'atmarksharp';
 (function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
 })();
</script>

<noscript> JavaScriptを有効にして下さい
 <a href="http://disqus.com/?ref_noscript">
  comments powered by Disqus.
 </a>
</noscript>

<a href="http://disqus.com" class="dsq-brlink"> comments powered by 
 <span class="logo-disqus"> Disqus </span>
</a></script></div></div></div><div id="sidebar"><div id="sidebar_inner"><div id="search_bar"><form id="search_bar_inner" action="http://www.google.com/search" method="get" target="_blank"><input type="hidden" name="q" value="site:atmarksharp.github.io"/><input type="text" name="q" style="color:gray" value="Search..." onfocus="(this.value == &quot;Search...&quot;)? this.value=&quot;&quot; : true" onblur="(this.value)? true : this.value=&quot;Search...&quot;" class="search-bar-text"/><input type="submit" class="search-bar-submit"/></form></div><h3 class="widget-title"><span class="widget-title-text">RECENT POSTS</span></h3><div class="widget-content"><ul class="widget-post-list"><li class="widget-post-item"><a href="./functional-language-by-js.html">CoffeeScriptで理解する『関数型言語』</a></li><li class="widget-post-item"><a href="./lambda-calculus-by-js.html">CoffeeScriptで理解する『ラムダ計算入門』</a></li><li class="widget-post-item"><a href="./long-command-play-sound.html">コマンドの終了時に好きな音を鳴らす方法</a></li><li class="widget-post-item"><a href="./cpu-comparison.html">年代別に見るCPUの進化 ― あなたのCPUのスコア知ってますか？</a></li><li class="widget-post-item"><a href="./greatest-keyboards.html">最も優れたキーボードランキング</a></li></ul></div><h3 class="widget-title"><span class="widget-title-text">PROFILE</span></h3><div class="widget-content"><ul class="widget-post-list"><li class="widget-post-item"><div class="github"><i class="menu-icon fa fa-github"></i><a href="https://github.com/atmarksharp" target="_blank">atmarksharp</a></div></li><li class="widget-post-item"><div class="twitter"><i class="menu-icon fa fa-twitter"></i><a href="https://twitter.com/atmarksharp" target="_blank">atmarksharp</a></div></li><li class="widget-post-item"><div class="twitter"><i class="menu-icon fa fa-facebook"></i><a href="https://www.facebook.com/slow.living.in.the.sky" target="_blank">slow.living.in.the.sky</a></div></li></ul></div><h3 class="widget-title"><span class="widget-title-text">ABOUT</span></h3><div class="widget-content">技術的なことに限らず、気になる話題を詳しく取り上げていきます。
</div><h3 class="widget-title"><span class="widget-title-text">RSS</span></h3><div class="widget-content"><ul class="widget-post-list"><li class="widget-post-item"><div class="rss"><img src="../img/rss.gif" alt="rss.gif"/><a href="/feed.xml">RSS 2.0</a></div></li></ul></div></div></div></div><div id="footer"><div id="desktop-footer-content"><h4 class="footer-powered-title"><span class="footer-back">&nbsp THIS BLOG IS POWERED BY &nbsp</span></h4><div style="margin-bottom: 20px;" class="center"><a href="http://github.com/" target="_blank" alt="github.com"><img src="../img/github-logo.png" class="pow-logo"/></a><a href="http://bitbucket.org/" target="_blank" alt="bitbucket.org"><img src="../img/bitbucket-logo.png" class="pow-logo"/></a><a href="http://harpjs.com/" target="_blank" alt="harpjs.com"><img src="../img/harp-logo.png" class="pow-logo"/></a><a href="http://purecss.io/" target="_blank" alt="purecss.io"><img src="../img/pure-logo.png" class="pow-logo"/></a><a href="http://jade-lang.com/" target="_blank" alt="jade-lang.com"><img src="../img/jade-logo.png" class="pow-logo"/></a></div><h4 class="footer-powered-title"><span class="footer-back">&nbsp CREATED BY &nbsp</span></h4><div class="center"><a href="http://github.com/atmarksharp/" target="_blank" alt="github.com/atmarksharp"><img src="../img/user-logo.png" class="pow-logo"/></a></div></div></div></div></div></body>