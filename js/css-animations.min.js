!function(){function e(t,n){for(var s=t.cssRules||t.rules||[],i=0;i<s.length;i++){var r=s[i];r.type==CSSRule.IMPORT_RULE?e(r.styleSheet,n):(r.type===CSSRule.KEYFRAMES_RULE||r.type===CSSRule.MOZ_KEYFRAMES_RULE||r.type===CSSRule.WEBKIT_KEYFRAMES_RULE)&&n(r,t,i)}}function t(e){this.original=e,this.keyText=e.keyText,this.css={};for(var t=e.style.cssText.split(";"),n=0;n<t.length;n++){var s=t[n].split(":");if(2==s.length){var i=s[0].replace(/^\s+|\s+$/g,""),r=s[1].replace(/^\s+|\s+$/g,"");this.css[i]=r}}}function n(e){this.original=e,this.name=e.name,this.keyframes=[],this.keytexts=[],this.keyframeHash={},this.initKeyframes()}function s(){this.animations={};for(var t=document.styleSheets,s=this.animations,i=0;i<t.length;i++)try{e(t[i],function(e){s[e.name]=new n(e)})}catch(r){}}n.prototype.initKeyframes=function(){this.keyframes=[],this.keytexts=[],this.keyframeHash={};for(var e=this.original,n=0;n<e.cssRules.length;n++){var s=new t(e.cssRules[n]);this.keyframes.push(s),this.keytexts.push(s.keyText),this.keyframeHash[s.keyText]=s}},n.prototype.getKeyframeTexts=function(){return this.keytexts},n.prototype.getKeyframe=function(e){return this.keyframeHash[e]},n.prototype.setKeyframe=function(e,t){var n=e+" {";for(var s in t)n+=s+":"+t[s]+";";return n+="}","appendRule"in this.original?this.original.appendRule(n):this.original.insertRule(n),this.initKeyframes(),this},n.prototype.setKeyframes=function(e){for(var t in e)this.setKeyframe(t,e[t])},n.prototype.clear=function(){for(var e=0;e<this.keyframes.length;e++)this.original.deleteRule(this.keyframes[e].keyText)},s.prototype.get=function(e){return this.animations[e]},s.prototype.getDynamicSheet=function(){if(!this.dynamicSheet){var e=document.createElement("style");e.rel="stylesheet",e.type="text/css",document.getElementsByTagName("head")[0].appendChild(e),this.dynamicSheet=e.sheet}return this.dynamicSheet},s.prototype.create=function(e,t){var s=this.getDynamicSheet();"object"==typeof e&&(t=e,e=null),e||(e="anim"+Math.floor(1e5*Math.random()));try{var i=s.insertRule("@keyframes "+e+"{}",s.cssRules.length)}catch(r){if("SYNTAX_ERR"!=r.name&&"SyntaxError"!=r.name)throw r;i=s.insertRule("@-webkit-keyframes "+e+"{}",s.cssRules.length)}var a=new n(s.cssRules[i]);return this.animations[e]=a,t&&a.setKeyframes(t),a},s.prototype.remove=function(t){var s=this.getDynamicSheet();t=t instanceof n?t.name:t,this.animations[t]=null;try{e(s,function(e,n,s){e.name==t&&n.deleteRule(s)})}catch(i){}},"function"==typeof define&&define.amd?define(function(){return new s}):window.CSSAnimations=new s}();